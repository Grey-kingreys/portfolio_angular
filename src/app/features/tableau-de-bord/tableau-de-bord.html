<section class="py-12 bg-gray-50">
    <div class="max-w-6xl mx-auto px-4">
        <!-- Header du tableau de bord -->
        <div class="text-center mb-10">
            <h1 class="text-3xl md:text-4xl font-bold mb-3 text-gray-900">Mon Activit√© GitHub</h1>
            <p class="text-gray-600 text-base md:text-lg">Statistiques et projets en temps r√©el</p>
        </div>

        <!-- √âtat de chargement -->
        @if (loading) {
            <div class="flex flex-col items-center justify-center py-10 text-center">
                <div class="inline-block h-8 w-8 animate-spin rounded-full border-4 border-indigo-500 border-t-transparent" role="status" aria-label="Chargement"></div>
                <p class="mt-4 text-gray-600">R√©cup√©ration des donn√©es GitHub...</p>
            </div>
        }

        <!-- Message d'erreur -->
        @if (error) {
            <div class="mb-6 rounded-lg border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-800 flex items-start gap-2" role="alert">
                <i class="bi bi-exclamation-triangle mt-0.5"></i>
                <span>{{ error }}</span>
            </div>
        }

        <!-- Contenu principal -->
        @if (!loading && !error) {
            <!-- Profil utilisateur -->
            @if (userInfo) {
                <div class="bg-white rounded-2xl shadow-sm mb-6 p-4 md:p-6">
                        <div class="grid gap-6 md:grid-cols-[auto,1fr] items-center">
                            <div class="flex justify-center md:justify-start">
                                <img [src]="userInfo.avatar_url" 
                                     [alt]="userInfo.login"
                                     class="w-28 h-28 md:w-32 md:h-32 rounded-full shadow object-cover">
                            </div>
                            <div>
                                <h2 class="text-2xl font-semibold mb-1 text-gray-900">{{ userInfo.name || userInfo.login }}</h2>
                                <p class="text-gray-600 mb-4">{{ userInfo.bio || 'D√©veloppeur passionn√©' }}</p>
                                <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
                                    <div class="text-center">
                                        <div class="text-xl font-semibold text-indigo-600">{{ userInfo.public_repos }}</div>
                                        <div class="text-xs text-gray-500 uppercase tracking-wide">D√©p√¥ts publics</div>
                                    </div>
                                    <div class="text-center">
                                        <div class="text-xl font-semibold text-indigo-600">{{ userInfo.followers }}</div>
                                        <div class="text-xs text-gray-500 uppercase tracking-wide">Followers</div>
                                    </div>
                                    <div class="text-center">
                                        <div class="text-xl font-semibold text-indigo-600">{{ userInfo.following }}</div>
                                        <div class="text-xs text-gray-500 uppercase tracking-wide">Following</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                </div>
            }

            <!-- Statistiques globales -->
            <div class="grid gap-4 md:grid-cols-3 mb-6">
                <div class="bg-white rounded-2xl shadow-sm p-5 text-center">
                    <i class="bi bi-star-fill text-yellow-400 text-3xl mb-2"></i>
                    <h3 class="text-2xl font-semibold text-gray-900 mb-1">{{ totalStars }}</h3>
                    <p class="text-gray-500 text-sm">Total des √©toiles</p>
                </div>
                <div class="bg-white rounded-2xl shadow-sm p-5 text-center">
                    <i class="bi bi-diagram-2-fill text-sky-500 text-3xl mb-2"></i>
                    <h3 class="text-2xl font-semibold text-gray-900 mb-1">{{ totalForks }}</h3>
                    <p class="text-gray-500 text-sm">Total des forks</p>
                </div>
                <div class="bg-white rounded-2xl shadow-sm p-5 text-center">
                    <i class="bi bi-code-slash text-emerald-500 text-3xl mb-2"></i>
                    <h3 class="text-2xl font-semibold text-gray-900 mb-1">{{ getTopLanguages().length }}</h3>
                    <p class="text-gray-500 text-sm">Langages utilis√©s</p>
                </div>
            </div>

            <!-- Langages les plus utilis√©s -->
            @if (getTopLanguages().length > 0) {
                <div class="bg-white rounded-2xl shadow-sm mb-6">
                    <div class="border-b border-gray-100 px-4 py-3">
                        <h4 class="text-base font-semibold text-gray-800">Langages les plus utilis√©s</h4>
                    </div>
                    <div class="p-4 md:p-5">
                        <div class="grid gap-4 md:grid-cols-2">
                            @for (lang of getTopLanguages(); track lang[0]) {
                                <div>
                                    <div class="flex items-center justify-between mb-2 text-sm">
                                        <span class="font-medium text-gray-800">{{ lang[0] }}</span>
                                        <span class="inline-flex items-center rounded-full bg-indigo-50 px-2.5 py-0.5 text-xs font-semibold text-indigo-600">{{ lang[1] }} projet(s)</span>
                                    </div>
                                    <div class="h-2 w-full rounded-full bg-gray-100 overflow-hidden">
                                        <div class="h-full rounded-full bg-indigo-500" 
                                             role="progressbar" 
                                             [style.width.%]="(lang[1] / repos.length) * 100">
                                        </div>
                                    </div>
                                </div>
                            }
                        </div>
                    </div>
                </div>
            }

            <!-- Liste des d√©p√¥ts r√©cents -->
            @if (repos.length > 0) {
                <div class="bg-white rounded-2xl shadow-sm overflow-hidden">
                    <div class="border-b border-gray-100 px-4 py-3">
                        <h4 class="text-base font-semibold text-gray-800">D√©p√¥ts r√©cents</h4>
                    </div>
                    <div class="overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-200 text-sm">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-4 py-2 text-left font-semibold text-gray-700">Nom</th>
                                    <th class="px-4 py-2 text-left font-semibold text-gray-700">Description</th>
                                    <th class="px-4 py-2 text-left font-semibold text-gray-700">Langage</th>
                                    <th class="px-4 py-2 text-center font-semibold text-gray-700">‚≠ê</th>
                                    <th class="px-4 py-2 text-center font-semibold text-gray-700">üç¥</th>
                                    <th class="px-4 py-2 text-right font-semibold text-gray-700">Actions</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-100">
                                @for (repo of repos.slice(0, 10); track repo.id) {
                                    <tr class="hover:bg-gray-50">
                                        <td class="px-4 py-2">
                                            <a [href]="repo.html_url" 
                                               target="_blank" 
                                               class="font-medium text-indigo-600 hover:text-indigo-800">
                                                {{ repo.name }}
                                            </a>
                                        </td>
                                        <td class="px-4 py-2 text-gray-600">
                                            <span class="text-xs md:text-sm">{{ repo.description || 'Aucune description' }}</span>
                                        </td>
                                        <td class="px-4 py-2">
                                            @if (repo.language) {
                                                <span class="inline-flex items-center rounded-full bg-gray-100 px-2 py-0.5 text-xs font-medium text-gray-700">{{ repo.language }}</span>
                                            } @else {
                                                <span class="text-gray-400 text-xs">-</span>
                                            }
                                        </td>
                                        <td class="px-4 py-2 text-center">
                                            <span class="text-yellow-500 text-xs md:text-sm">‚≠ê {{ repo.stargazers_count }}</span>
                                        </td>
                                        <td class="px-4 py-2 text-center">
                                            <span class="text-sky-500 text-xs md:text-sm">üç¥ {{ repo.forks_count }}</span>
                                        </td>
                                        <td class="px-4 py-2 text-right">
                                            <a [href]="repo.html_url" 
                                               target="_blank" 
                                               class="inline-flex items-center rounded-lg border border-indigo-500 px-2.5 py-1 text-xs font-medium text-indigo-600 hover:bg-indigo-50 transition-colors transform hover:-translate-y-0.5 hover:shadow-md duration-200">
                                                <i class="bi bi-box-arrow-up-right"></i>
                                            </a>
                                        </td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                </div>
            }
        }
    </div>
</section>
